@model IEnumerable<Ecommerce_p1.Models.Cart>

@{
    ViewBag.Title = "Index";
    decimal total = 0;
}

<h2>Your Shopping Cart</h2>
<br />
<div class="col-md-8">
    <table class="table table-hover table-condensed">
        <tr>
            <th></th>
            <th>
                @Html.DisplayNameFor(model => model.Product.ProductName)
            </th>
            <th>
                @Html.DisplayNameFor(model => model.Product.BrandName)
            </th>
            <th>
                @Html.DisplayNameFor(model => model.Product.Price)
            </th>
            <th>
                @Html.DisplayNameFor(model => model.Count)
            </th>
            <th>
                Total
            </th>
            <th>
                @Html.DisplayNameFor(model => model.DateCreated)
            </th>
            <th></th>
        </tr>

        @foreach (var item in Model)
        {
            <tr>
                <td>
                    <a href="@Url.Action("../Products/Details", new { id = item.ProductId })">
                        <img src="@item.Product.ImageURL" alt="product image" height="100" />
                    </a>
                </td>
                <td>
                    <a href="@Url.Action("../Products/Details", new { id = item.ProductId })">
                        @Html.DisplayFor(modelItem => item.Product.ProductName)
                    </a>
                </td>
                <td>
                    @Html.DisplayFor(modelItem => item.Product.BrandName)
                </td>
                <td>
                    @Html.DisplayFor(modelItem => item.Product.Price)
                </td>
                <td>
                    <span class="glyphicon glyphicon-plus" aria-hidden="true"></span>
                    @Html.DisplayFor(modelItem => item.Count)
                    <span class="glyphicon glyphicon-minus" aria-hidden="true"></span>
                </td>
                <td>
                    @(item.Product.Price * item.Count)
                    total += cartItem.Product.Price * cartItem.Count;
                </td>
                <td>
                    @Html.DisplayFor(modelItem => item.DateCreated)
                </td>
                <td>
                    @Html.ActionLink("Remove", "Delete", new { id = item.RecordId })
                </td>
            </tr>
        }
    </table>
</div>
<div class="col-md-push-1 col-md-4">
    <div class="panel panel-success">
        <div class="panel-heading">
            <h3 class="panel-title">Order Total</h3>
        </div>
        <div class="panel-body">
            <div class="col-xs-4 col-sm-4 col-md-4">
                <p>Cart Total : </p>
                <p>HST : </p>
                <p>Grand Total : </p>
            </div>
            <div class="col-xs-6 col-sm-6 col-md-6">
                <p>@total</p>
                <p>@( total * Convert.ToDecimal(0.13) )</p>
                <p>@( total + (total * Convert.ToDecimal(0.13)))</p>
            </div>
        </div>
    </div>
</div>

